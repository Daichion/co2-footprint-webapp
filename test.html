<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CO₂ Footprint Transparency</title>
  <!-- Tailwind CSS über CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Alpine.js für Interaktivität -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="bg-neutral-50 text-neutral-900 min-h-screen flex flex-col">

  <!-- Header -->
  <header class="sticky top-0 z-30 bg-white/90 backdrop-blur border-b border-neutral-200">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="size-10 md:size-12 rounded-2xl bg-emerald-100 border border-emerald-200 grid place-items-center shadow-sm">
          <svg width="28" height="28" fill="none" viewBox="0 0 24 24" stroke="#059669" stroke-width="2"><path d="M4 12a8 8 0 0116 0 8 8 0 01-16 0z"/></svg>
        </div>
        <div>
          <h1 class="text-xl md:text-2xl font-semibold tracking-tight">CO₂ Footprint Transparency</h1>
          <p class="text-xs md:text-sm text-neutral-600">Open data demo (fiktiv)</p>
        </div>
      </div>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#home" class="hover:text-emerald-600">Home</a>
        <a href="#data" class="hover:text-emerald-600">Data</a>
        <a href="#method" class="hover:text-emerald-600">Methodology</a>
        <a href="#about" class="hover:text-emerald-600">About</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-1 max-w-7xl mx-auto w-full px-4 py-6 md:py-10 grid md:grid-cols-12 gap-6" x-data="co2App()">
    <!-- Local Menu -->
    <aside class="md:col-span-3">
      <section class="rounded-2xl border border-neutral-200 bg-white p-4 shadow-sm">
        <h2 class="text-base font-semibold mb-3">Lokales Menü</h2>
        <ul class="space-y-2 text-sm">
          <li><a href="#data" class="hover:text-emerald-700">Emissionsdaten</a></li>
          <li><a href="#filters" class="hover:text-emerald-700">Filter & Sortierung</a></li>
          <li><a href="#method" class="hover:text-emerald-700">Methodik</a></li>
          <li><a href="#legal" class="hover:text-emerald-700">Rechtliches</a></li>
        </ul>
      </section>

      <section id="filters" class="rounded-2xl border border-neutral-200 bg-white p-4 shadow-sm mt-4">
        <h3 class="text-sm font-medium mb-3">Filter</h3>
        <div class="space-y-3 text-sm">
          <div>
            <label class="block text-xs mb-1">Land</label>
            <input type="text" x-model="filters.country" class="w-full rounded-xl border border-neutral-300 px-3 py-2" placeholder="z. B. Germany">
          </div>
          <div>
            <label class="block text-xs mb-1">Unternehmen</label>
            <input type="text" x-model="filters.company" class="w-full rounded-xl border border-neutral-300 px-3 py-2" placeholder="z. B. AutoWerk">
          </div>
          <div>
            <label class="block text-xs mb-1">Jahr von</label>
            <input type="number" x-model.number="filters.yearMin" class="w-full rounded-xl border border-neutral-300 px-3 py-2">
          </div>
          <div>
            <label class="block text-xs mb-1">Jahr bis</label>
            <input type="number" x-model.number="filters.yearMax" class="w-full rounded-xl border border-neutral-300 px-3 py-2">
          </div>
        </div>
      </section>
    </aside>

    <!-- Data Table -->
    <section id="data" class="md:col-span-9 rounded-2xl border border-neutral-200 bg-white p-4 md:p-6 shadow-sm">
      <div class="flex items-end justify-between flex-wrap">
        <h2 class="text-lg md:text-xl font-semibold">Emissionsdaten (fiktiv)</h2>
        <div class="text-xs text-neutral-600" x-text="filteredData.length + ' Einträge'"></div>
      </div>
      <div class="overflow-x-auto mt-4">
        <table class="min-w-full text-sm">
          <thead>
            <tr class="border-b">
              <th class="px-3 py-2 cursor-pointer" @click="sortBy('country')">Land</th>
              <th class="px-3 py-2 cursor-pointer" @click="sortBy('company')">Unternehmen</th>
              <th class="px-3 py-2 cursor-pointer" @click="sortBy('year')">Jahr</th>
              <th class="px-3 py-2 cursor-pointer" @click="sortBy('emissions')">Emissionen (MtCO₂e)</th>
            </tr>
          </thead>
          <tbody>
            <template x-for="row in filteredData" :key="row.company + row.year">
              <tr class="border-b hover:bg-neutral-50">
                <td class="px-3 py-2" x-text="row.country"></td>
                <td class="px-3 py-2" x-text="row.company"></td>
                <td class="px-3 py-2" x-text="row.year"></td>
                <td class="px-3 py-2" x-text="row.emissions.toFixed(1)"></td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer id="legal" class="mt-10 border-t border-neutral-200 bg-white">
    <div class="max-w-7xl mx-auto px-4 py-6 text-xs md:text-sm text-neutral-600">
      © <span x-text="new Date().getFullYear()"></span> Climate Transparency Demo – fiktive Daten. Nur zu Studienzwecken.
    </div>
  </footer>

  <!-- Alpine.js Component -->
  <script>
    function co2App() {
      return {
        filters: { country: '', company: '', yearMin: 2000, yearMax: 2100 },
        sortKey: 'emissions',
        sortDir: 'desc',
        data: [
          { country: "USA", company: "PetroMax Energy", year: 2024, emissions: 412.3 },
          { country: "China", company: "DragonSteel", year: 2024, emissions: 158.9 },
          { country: "Germany", company: "AutoWerk AG", year: 2024, emissions: 62.1 },
          { country: "Brazil", company: "AgroSun Foods", year: 2024, emissions: 41.8 },
          { country: "India", company: "BharatPower", year: 2023, emissions: 120.7 }
        ],
        get filteredData() {
          return this.data.filter(r => {
            return (!this.filters.country || r.country.toLowerCase().includes(this.filters.country.toLowerCase())) &&
                   (!this.filters.company || r.company.toLowerCase().includes(this.filters.company.toLowerCase())) &&
                   r.year >= this.filters.yearMin && r.year <= this.filters.yearMax;
          }).sort((a,b)=>{
            let dir = this.sortDir === 'asc' ? 1 : -1;
            if(typeof a[this.sortKey] === 'string'){
              return a[this.sortKey].localeCompare(b[this.sortKey]) * dir;
            }
            return (a[this.sortKey]-b[this.sortKey]) * dir;
          });
        },
        sortBy(key){
          if(this.sortKey===key){this.sortDir=this.sortDir==='asc'?'desc':'asc';}
          else{this.sortKey=key;this.sortDir='asc';}
        }
      }
    }
  </script>
</body>
</html>
